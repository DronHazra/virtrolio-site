<div class="container montserrat vertical-center">
  <div class="row justify-content-center">

    <!-- Virtrolio cover -->
    <div class="vertical-center mx-5 my-3 my-md-0">
      <div class="bg-primary rounded" id="virtrolio-outer-div" routerLink="/viewing">
        <div class="bg-light p-3 mt-4 m-4 rounded vertical-center" id="virtrolio-title">
          <h1>2019-2020</h1>
        </div>
        <div class="mt-5">
          <h2 id="users-virtrolio">{{ displayName }}'s <br> virtrolio </h2>
        </div>
      </div>
    </div>

    <!-- Side buttons -->
    <div class="col-lg-3 col-md-4 col-sm-5 px-2 vertical-center">
      <div id="buttons">
        <div class="row">
          <button class="btn-lg btn-primary" type="button" routerLink="/viewing">View Messages</button>
        </div>
        <div class="row">
          <button class="btn-lg btn-primary" type="button" data-toggle="modal" data-target="#send-message">Send a
            Message
          </button>
        </div>
        <div class="row">
          <button class="btn-lg btn-primary" type="button" data-toggle="modal" data-target="#link-gen"
                  (click)="setLink(); showWarningText=false;">Sharing Link
          </button>
        </div>
        <div class="row">
          <button class="btn-lg btn-primary" type="button" routerLink="/settings">Settings</button>
        </div>
      </div>
    </div>

    <div class="col-lg-1"></div> <!-- Spacer to push the book & buttons left on big screens -->
  </div>
</div>

<!-- Sharing Link Modal -->
<div class="modal fade" id="link-gen" tabindex="-1" role="dialog" aria-labelledby="link-gen-title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="link-gen-title">Ahoy, your sharing link has been prepared!</h5>
        <button type="button" class="btn btn-primary close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body sharing-link-body">
        <p>This is <b>your</b> sharing link; only share it with people you trust.</p>
        <label for="sharing-link-field">Your Link:</label>
        <input type="text" class="align-middle" #sharingLink value="{{ link }}" readonly [disabled]="!linkReady"
               (click)="copyLink(sharingLink)" id="sharing-link-field">
        <button type="button" id="button-copy" [disabled]="!linkReady" class="btn btn-primary align-middle"
                (click)="copyLink(sharingLink)">{{ copyButtonText }}
        </button>

        <div class="row">
          <label for="button-new-link" style="display:none">Click to generate a new link</label>
          <button class="btn btn-secondary" type="button" id="button-new-link" (click)="warnAndGenerate()">Generate
            new link
          </button>
          <div class="mt-3" id="generate-link-desc">
            <h6>Why would I want to generate a new link?</h6>
            <p>If you want people to stop being able to use your
              old one! Comes in handy if people are signing your virtrolio whom you don't approve of.</p>
          </div>
          <div id="warning-div" *ngIf="showWarningText">
            Are you sure? Generating a new link will invalidate any other links that you have generated! Click generate
            again to confirm.
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Send a Message Modal -->
<div class="modal fade" id="send-message" tabindex="-1" role="dialog" aria-labelledby="send-message-modal-title"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="send-message-modal-title">You're barking up the wrong tree, bud!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body sharing-link-body">
        <p>
          To sign a friend's virtrolio, they need to give you their 'sharing link'! You can paste your friend's sharing
          link below or directly into your browser search bar. To access <em>your</em> sharing link, click the 'Sharing
          Link' button on this page!
        </p>
        <label id="input-sharing-label" for="input-sharing-field" style="display:none">Visit friend link</label>
        <input type="text" class="align-middle" #inputSharing value="Input your friend's link here"
               (click)="copyLink(inputSharing)" id="input-sharing-field" [(ngModel)]='visitLink'>
        <button type="button" id="button-go" class="btn btn-primary align-middle button-modal" data-dismiss="modal"
                aria-label="Close"
                (click)="navigateToLink()">Go
        </button>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
